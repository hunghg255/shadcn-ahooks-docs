---
title: useControllableValue
description: In some components, we need the state to be managed by itself or controlled by it's parent. useControllableValue is a Hook that helps you manage this kind of state.
---

## Overview

In some components, we need the state to be managed by itself or controlled by it's parent. `useControllableValue` is a Hook that helps you manage this kind of state.

[Documentation and Examples](https://ahooks.js.org/hooks/use-controllablevalue)

## Installation

<OpenInV0Button url="https://shadcn-ahooks.vercel.app/r/useControllableValue.json" />

<Tabs items={['pnpm', 'npm', 'yarn', 'bun']}>
  <Tab value="pnpm">
  ```bash
  pnpm dlx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useControllableValue.json
  ```
  </Tab>
  <Tab value="npm">
  ```bash
  npx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useControllableValue.json
  ```
  </Tab>
  <Tab value="yarn">
  ```bash
  yarn shadcn@latest add https://shadcn-ahooks.vercel.app/r/useControllableValue.json
  ```
  </Tab>
  <Tab value="bun">
  ```bash
  bun shadcn@latest add https://shadcn-ahooks.vercel.app/r/useControllableValue.json
  ```
  </Tab>
</Tabs>

In some components, we need the state to be managed by itself or controlled by it's parent. `useControllableValue` is a Hook that helps you manage this kind of state.

## Examples

### Uncontrolled component

<Preview name="useControllableValue"
 code={`
import React, { useState, useRef } from 'react';
import useControllableValue from '@/src/hooks/ahooks/useControllableValue';

const Example = (props: any) => {
  const [state, setState] = useControllableValue<string>(props, {
    defaultValue: '',
  });

  return (
    <>
      <input value={state} onChange={(e) => setState(e.target.value)} style={{ width: 300 }} />
      <button type="button" onClick={() => setState('')} style={{ marginLeft: 8 }}>
        Clear
      </button>
    </>
  );
};

export default Example;`} />

### Controlled component


<Preview name="useControllableValue"
 code={`
import React, { useState, useRef } from 'react';
import useControllableValue from '@/src/hooks/ahooks/useControllableValue';

const ControllableComponent = (props: any) => {
  const [state, setState] = useControllableValue<string>(props);

  return <input value={state} onChange={(e) => setState(e.target.value)} style={{ width: 300 }} />;
};

const Example = () => {
   const [state, setState] = useState<string>('');
  const clear = () => {
    setState('');
  };

  return (
    <>
      <ControllableComponent value={state} onChange={setState} />
      <button type="button" onClick={clear} style={{ marginLeft: 8 }}>
        Clear
      </button>
    </>
  );
};

export default Example;`} />

### No value, have onChange component

<Preview name="useControllableValue"
 code={`
import React, { useState, useRef } from 'react';
import useControllableValue from '@/src/hooks/ahooks/useControllableValue';

const ControllableComponent = (props: any) => {
  const [state, setState] = useControllableValue<string>(props);

  return (
    <input
      value={state}
      onChange={(e) => {
        setState(e.target.value);
      }}
      style={{ width: 300 }}
    />
  );
};

const Example = () => {
   const [state, setState] = useState<number>(0);

  return (
    <>
      <div style={{ marginBottom: 8 }}>state:{state}</div>
      <ControllableComponent onChange={setState} />
    </>
  );
};

export default Example;`} />

## API

```typescript
const [state, setState] = useControllableValue(props: Record<string, any>, options?: Options);
```

### Result

| Property | Description | Type                                                |
| -------- | ----------- | --------------------------------------------------- |
| state    | State       | -                                                   |
| setState | Set state   | `(value: any \| ((prevState: any) => any)) => void` |

### Params

| Property | Description            | Type                  | Default |
| -------- | ---------------------- | --------------------- | ------- |
| props    | Component props        | `Record<string, any>` | -       |
| options  | Optional configuration | `Options`             | -       |

### Options

| Property             | Description                                                                     | Type     | Default        |
| -------------------- | ------------------------------------------------------------------------------- | -------- | -------------- |
| defaultValue         | The default value, will be overridden by `props.defaultValue` and `props.value` | -        | -              |
| defaultValuePropName | Custom defaultValue attribute name                                               | `string` | `defaultValue` |
| valuePropName        | Custom value attribute name                                                     | `string` | `value`        |
| trigger              | Custom trigger attribute name                                                   | `string` | `onChange`     |
