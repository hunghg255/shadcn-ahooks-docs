---
title: useInViewport
description: Observe whether the element is in the visible area, and the visible area ratio of the element. More information refer to [Intersection Observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API).
---

## Overview

Observe whether the element is in the visible area, and the visible area ratio of the element. More information refer to [Intersection Observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API).

[Documentation and Examples](https://ahooks.js.org/hooks/use-inviewport)

## Installation

<OpenInV0Button url="https://shadcn-ahooks.vercel.app/r/useInViewport.json" />

<Tabs items={['pnpm', 'npm', 'yarn', 'bun']}>
  <Tab value="pnpm">
  ```bash
  pnpm dlx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useInViewport.json
  ```
  </Tab>
  <Tab value="npm">
  ```bash
  npx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useInViewport.json
  ```
  </Tab>
  <Tab value="yarn">
  ```bash
  yarn shadcn@latest add https://shadcn-ahooks.vercel.app/r/useInViewport.json
  ```
  </Tab>
  <Tab value="bun">
  ```bash
  bun shadcn@latest add https://shadcn-ahooks.vercel.app/r/useInViewport.json
  ```
  </Tab>
</Tabs>

Observe whether the element is in the visible area, and the visible area ratio of the element. More information refer to [Intersection Observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API).

## Examples

### Default usage

<Preview name="useInViewport"
 code={`
import useInViewport from '@/src/hooks/ahooks/useInViewport';
import React, { useRef } from 'react';

const Example = () => {
 const ref = useRef(null);
  const [inViewport] = useInViewport(ref);
  return (
    <div>
      <div style={{ width: 300, height: 300, overflow: 'scroll', border: '1px solid' }}>
        scroll here
        <div style={{ height: 800 }}>
          <div
            ref={ref}
            style={{
              border: '1px solid',
              height: 100,
              width: 100,
              textAlign: 'center',
              marginTop: 80,
            }}
          >
            observer dom
          </div>
        </div>
      </div>
      <div style={{ marginTop: 16, color: inViewport ? '#87d068' : '#f50' }}>
        inViewport: {inViewport ? 'visible' : 'hidden'}
      </div>
    </div>
  );
};

export default Example;`} />

### Observe the visible area ratio of element

- Observe element visible area ratio
- Pass in options.threshold, you can control the ratio to be triggered when the visible area reach every threshold.
options.root can control the parent element, in this example, visible will not change relative to the browser viewport.


<Preview name="useInViewport"
 code={`
import useInViewport from '@/src/hooks/ahooks/useInViewport';
import React, { useRef } from 'react';

const Example = () => {
const [inViewport, ratio] = useInViewport(() => document.getElementById('children'), {
    threshold: [0, 0.25, 0.5, 0.75, 1],
    root: () => document.getElementById('parent'),
  });
  return (
    <div>
      <div style={{ width: 300, height: 300, overflow: 'scroll', border: '1px solid' }} id="parent">
        scroll here
        <div style={{ height: 800 }}>
          <div
            id="children"
            style={{
              border: '1px solid',
              height: 100,
              width: 100,
              textAlign: 'center',
              marginTop: 80,
            }}
          >
            observer dom
          </div>
        </div>
      </div>
      <div style={{ marginTop: 16, color: inViewport ? '#87d068' : '#f50' }}>
        <p>inViewport: {inViewport ? 'visible' : 'hidden'}</p>
        <p>ratio: {ratio}</p>
      </div>
    </div>
  );
};

export default Example;`} />

### Listening content scrolling selection menu

- Pass the callback that is triggered when the callback of IntersectionObserver is called, so you can do some customization.

<Preview name="useInViewport"
registryDependencies={['useMemoizedFn']}
 code={`
import useInViewport from '@/src/hooks/ahooks/useInViewport';
import useMemoizedFn from '@/src/hooks/ahooks/useMemoizedFn';
import React, { useRef, useState } from 'react';

const menus = ['menu-1', 'menu-2', 'menu-3'];
const content = {
  'menu-1': 'Content for menus 1',
  'menu-2': 'Content for menus 2',
  'menu-3': 'Content for menus 3',
};

const Example = () => {
 const menuRef = useRef<HTMLDivElement[]>([]);

  const [activeMenu, setActiveMenu] = useState(menus[0]);

  const callback = useMemoizedFn((entry) => {
    if (entry.isIntersecting) {
      const active = entry.target.getAttribute('id') || '';
      setActiveMenu(active);
    }
  });

  const handleMenuClick = (index) => {
    const contentEl = document.getElementById('content-scroll');
    const top = menuRef.current[index]?.offsetTop;

    contentEl?.scrollTo({
      top,
      behavior: 'smooth',
    });
  };

  useInViewport(menuRef.current, {
    callback,
    root: () => document.getElementById('parent-scroll'),
    rootMargin: '-50% 0px -50% 0px',
  });

  return (
    <div
      id="parent-scroll"
      style={{ width: 300, height: 300, border: '1px solid', display: 'flex', overflow: 'hidden' }}
    >
      <div style={{ width: '30%', backgroundColor: '#f0f0f0' }}>
        <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>
          {menus.map((menu, index) => (
            <li
              key={menu}
              onClick={() => handleMenuClick(index)}
              style={{
                padding: '10px',
                cursor: 'pointer',
                textAlign: 'center',
                transition: 'background-color 0.2s ease-in-out',
                backgroundColor: activeMenu === menu ? '#e0e0e0' : '',
              }}
            >
              {menu}
            </li>
          ))}
        </ul>
      </div>
      <div id="content-scroll" style={{ flex: 1, overflowY: 'scroll', position: 'relative' }}>
        {menus.map((menu, index) => (
          <div
            ref={(el: HTMLDivElement) => {
              menuRef.current[index] = el;
            }}
            key={menu}
            id={menu}
            style={{
              display: 'flex',
              justifyContent: 'center',
              alignItems: 'center',
              height: '100%',
              fontSize: 16,
            }}
          >
            {content[menu]}
          </div>
        ))}
      </div>
    </div>
  );
};

export default Example;`} />

## API

```typescript
type Target = Element | (() => Element) | React.MutableRefObject<Element>;

const [inViewport, ratio] = useInViewport(
  target: Target | Target[],
  options?: Options
);
```

### Params

| Property | Description                        | Type                     | Default |
| -------- | ---------------------------------- | ------------------------ | ------- |
| target   | DOM elements or Ref, support array | `Target` \| `Target[]`   | -       |
| options  | Setting                            | `Options` \| `undefined` | -       |

### Options

More information refer to [Intersection Observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)

| Property   | Description                                                                                                                                                                       | Type                                                                                 | Default |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------ | ------- |
| threshold  | Either a single number or an array of numbers which indicate at what percentage of the target's visibility the ratio should be executed                                           | `number` \| `number[]`                                                               | -       |
| rootMargin | Margin around the root                                                                                                                                                            | `string`                                                                             | -       |
| root       | The element that is used as the viewport for checking visibility of the target. Must be the ancestor of the target. Defaults to the browser viewport if not specified or if null. | `Element` \| `Document` \| `() => (Element/Document)` \| `MutableRefObject<Element>` | -       |
| callback   | Triggered when the callback of `IntersectionObserver` is called                                                                                                                   | `(entry: IntersectionObserverEntry) => void`                                         | -       |

### Result

| Property   | Description                                                                              | Type                     |
| ---------- | ---------------------------------------------------------------------------------------- | ------------------------ |
| inViewport | Is visible                                                                               | `boolean` \| `undefined` |
| ratio      | Current visible ratio, updated every time the node set by `options.threshold` is reached | `number` \| `undefined`  |
