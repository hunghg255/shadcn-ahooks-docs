---
title: Throttle
description: The API useRequest
---


# Throttle

Enter the throttle mode by setting `options.throttleWait`. At this time, if `run` or `runAsync` is triggered frequently, the request will be executed with the throttle strategy.

```tsx | pure
const { data, run } = useRequest(getUsername, {
  throttleWait: 300,
  manual: true
});
```

As in the example code above, if `run` is triggered frequently, it will only be executed once every 300ms.

You can quickly enter text in the input box below to experience the effect


<Preview name="useRequest"
 code={`

import useRequest from '@/src/hooks/ahooks/useRequest';
import Mock from 'mockjs';
import React from 'react';

async function getEmail(search?: string): Promise<string[]> {
  console.log('debounce getEmail', search);
  return new Promise((resolve) => {
    setTimeout(() => {
      resolve(Mock.mock({ 'data|5': ['@email'] }).data);
    }, 300);
  });
}
const Example = () => {
  const { data, loading, run } = useRequest(getEmail, {
  throttleWait: 1000,
    manual: true,
  });

  return (
    <div>
      <input placeholder="Search Emails" onChange={(e) => run(e.target.value)} />
      {loading ? (
        <p>loading</p>
      ) : (
        <ul style={{ marginTop: 8 }}>
          {data?.map((i) => (
            <li key={i}>{i}</li>
          ))}
        </ul>
      )}
    </div>
  );
};

export default Example;`} />

## API

### Options

The usage and effects of all throttle property are the same as [lodash.throttle](https://lodash.com/docs/4.17.15#throttle)

| Property         | Description                                                                 | Type      | Default Value |
| ---------------- | --------------------------------------------------------------------------- | --------- | ------------- |
| throttleWait     | Throttle wait time, in milliseconds. After setting, enter the throttle mode | `number`  | -             |
| throttleLeading  | Execute the request before throttling starts                                | `boolean` | `true`        |
| throttleTrailing | Execute the request after throttling ends                                   | `boolean` | `true`        |

## Remark

- `options.throttleWait`, `options.throttleLeading`, `options.throttleTrailing` support dynamic changes.
- `runAsync` will return a `Promise` when it is actually executed. When it is not executed, there will be no return.
- `cancel` can abort a function waiting to be executed.
