---
title: useHistoryTravel
description: A hook to manage state change history. It provides encapsulation methods to travel through the history.
---

## Overview

A hook to manage state change history. It provides encapsulation methods to travel through the history.

[Documentation and Examples](https://ahooks.js.org/hooks/use-historytravel)

## Installation

<OpenInV0Button url="https://shadcn-ahooks.vercel.app/r/useHistoryTravel.json" />

<Tabs items={['pnpm', 'npm', 'yarn', 'bun']}>
  <Tab value="pnpm">
  ```bash
  pnpm dlx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useHistoryTravel.json
  ```
  </Tab>
  <Tab value="npm">
  ```bash
  npx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useHistoryTravel.json
  ```
  </Tab>
  <Tab value="yarn">
  ```bash
  yarn shadcn@latest add https://shadcn-ahooks.vercel.app/r/useHistoryTravel.json
  ```
  </Tab>
  <Tab value="bun">
  ```bash
  bun shadcn@latest add https://shadcn-ahooks.vercel.app/r/useHistoryTravel.json
  ```
  </Tab>
</Tabs>

A hook to manage state change history. It provides encapsulation methods to travel through the history.

## Examples

### Basic usage

<Preview name="useHistoryTravel"
 code={`
import useHistoryTravel from '@/src/hooks/ahooks/useHistoryTravel';

const Example = () => {
  const { value, setValue, backLength, forwardLength, back, forward } = useHistoryTravel<string>();

  return (
    <div>
      <input value={value || ''} onChange={(e) => setValue(e.target.value)} />
      <button disabled={backLength <= 0} onClick={back} style={{ margin: '0 8px' }}>
        back
      </button>
      <button disabled={forwardLength <= 0} onClick={forward}>
        forward
      </button>
    </div>
  );
};

export default Example;`} />


### Todo List

<Preview name="useHistoryTravel"
 code={`
import useHistoryTravel from '@/src/hooks/ahooks/useHistoryTravel';
import React, { useState } from 'react';

const Example = () => {
 const {
    value = [],
    setValue,
    backLength,
    forwardLength,
    back,
    forward,
    go,
    reset,
  } = useHistoryTravel(['do homework']);

  const [inputValue, setInputValue] = useState('');
  const [step, setStep] = useState(-1);

  const onAdd = () => {
    setValue([...value, inputValue]);
    setInputValue('');
  };

  const onGo = () => {
    go(step);
    setStep(0);
  };

  const onReset = () => {
    reset();
    setStep(0);
    setInputValue('');
  };

  return (
    <div>
      <div style={{ border: '1px solid #ebedf1', padding: 16, marginBottom: 16 }}>
        <h3>TODO List</h3>
        <ul>
          {value.map((it, index) => (
            <li key={index}>{it}</li>
          ))}
        </ul>
      </div>
      <div style={{ marginBottom: 16 }}>
        <input
          value={inputValue}
          onChange={(e) => setInputValue(e.target.value)}
          placeholder="Please enter TODO name"
          style={{ width: 200, marginRight: 8 }}
        />
        <button type="button" onClick={onAdd} style={{ marginRight: 8 }}>
          Add TODO
        </button>
        <button type="button" disabled={backLength <= 0} onClick={back} style={{ marginRight: 8 }}>
          Undo
        </button>
        <button
          type="button"
          disabled={forwardLength <= 0}
          onClick={forward}
          style={{ marginRight: 8 }}
        >
          Redo
        </button>
        <button type="button" disabled={!backLength && !forwardLength} onClick={onReset}>
          Reset
        </button>
      </div>
      <div>
        <input
          type="number"
          value={step}
          onChange={(e) => setStep(e.target.value as any)}
          max={forwardLength}
          min={backLength * -1}
          style={{ marginRight: 8, width: 60 }}
        />
        <button type="button" onClick={onGo}>
          Go
        </button>
      </div>
    </div>
  );
};

export default Example;`} />


### Limit maximum history length

<Preview name="useHistoryTravel"
 code={`
import useHistoryTravel from '@/src/hooks/ahooks/useHistoryTravel';

const Example = () => {
   const maxLength = 3;
  const { value, setValue, backLength, forwardLength, back, forward } = useHistoryTravel<string>(
    '',
    maxLength,
  );

  return (
    <div>
      <div>maxLength: {maxLength}</div>
      <div>backLength: {backLength}</div>
      <div>forwardLength: {forwardLength}</div>
      <input value={value || ''} onChange={(e) => setValue(e.target.value)} />
      <button disabled={backLength <= 0} onClick={back} style={{ margin: '0 8px' }}>
        back
      </button>
      <button disabled={forwardLength <= 0} onClick={forward}>
        forward
      </button>
    </div>
  );
};

export default Example;`} />


## API

```typescript
const {
  value,
  setValue,
  backLength,
  forwardLength,
  go,
  back,
  forward
} = useHistoryTravel<T>(initialValue?: T, maxLength: number = 0 );
```

### Params

| Property     | Description                                                                                                               | Type     | Default     |
| ------------ | ------------------------------------------------------------------------------------------------------------------------- | -------- | ----------- |
| initialValue | Optional initial value                                                                                                    | `T`      | -           |
| maxLength    | Optional limit the maximum length of history records. If the maximum length is exceeded, the first record will be deleted | `number` | 0 unlimited |

### Result

| Property      | Description                                                                       | Type                            |
| ------------- | --------------------------------------------------------------------------------- | ------------------------------- |
| value         | Current value                                                                     | `T`                             |
| setValue      | Set value                                                                         | `(value: T) => void`            |
| backLength    | The length of backward history                                                    | `number`                        |
| forwardLength | The length of forward history                                                     | `number`                        |
| go            | Move between the history, move backward on step < 0ï¼Œand move forward on step > 0 | `(step: number) => void`        |
| back          | Move one step backward                                                            | `() => void`                    |
| foward        | Move one step forward                                                             | `() => void`                    |
| reset         | Reset history to initial value by default or provide a new initial value.         | `(newInitialValue?: T) => void` |
