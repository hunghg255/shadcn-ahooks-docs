---
title: useEventEmitter
description: Sometimes it is difficult to pass events between multiple components. By using EventEmitter, this can be simplified.
---

## Overview

Sometimes it is difficult to pass events between multiple components. By using EventEmitter, this can be simplified.

[Documentation and Examples](https://ahooks.js.org/hooks/use-eventemitter)

## Installation

<OpenInV0Button url="https://shadcn-ahooks.vercel.app/r/useEventEmitter.json" />

<Tabs items={['pnpm', 'npm', 'yarn', 'bun']}>
  <Tab value="pnpm">
  ```bash
  pnpm dlx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useEventEmitter.json
  ```
  </Tab>
  <Tab value="npm">
  ```bash
  npx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useEventEmitter.json
  ```
  </Tab>
  <Tab value="yarn">
  ```bash
  yarn shadcn@latest add https://shadcn-ahooks.vercel.app/r/useEventEmitter.json
  ```
  </Tab>
  <Tab value="bun">
  ```bash
  bun shadcn@latest add https://shadcn-ahooks.vercel.app/r/useEventEmitter.json
  ```
  </Tab>
</Tabs>

Sometimes it is difficult to pass events between multiple components. By using EventEmitter, this can be simplified.

To get an instance of `EventEmitter`, you can call `useEventEmitter` in React components.

```js
const event$ = useEventEmitter();
```

> If the component renders multiple times, the return value of `useEventEmitter` in every render process will stay unchanged and no extra `EventEmitter` instance will be created.

Then we can share `event$` to other components via `props` or `Context`. To push a event, just call the `emit` method of `EventEmitter`. To subscribe to a series of events, call the `useSubscription` method.

```js
event$.emit('hello');
```

```js
event$.useSubscription(val => {
  console.log(val);
});
```

> `useSubscription` will automatically register the subscription and unsubscription.

If you want to let the child component notify the parent component, you can just use `props` to pass a `onEvent` function. And if you want to let the parent component notify the child component, you can use `forwardRef` to retrieve the ref of child component. `useEventEmitter` is most suitable for event management among multiple components or between two components which are far away.

## Examples

### Parent component shares a event


<Preview name="useEventEmitter"
 code={`
import useEventEmitter, { EventEmitter } from '@/src/hooks/ahooks/useEventEmitter';
import React, { useRef, FC } from 'react';

const MessageBox: FC<{
  focus$: EventEmitter<void>;
}> = function (props) {
  return (
    <div style={{ paddingBottom: 24 }}>
      <p>You received a message</p>
      <button
        type="button"
        onClick={() => {
          props.focus$.emit();
        }}
      >
        Reply
      </button>
    </div>
  );
};

const InputBox: FC<{
  focus$: EventEmitter<void>;
}> = function (props) {
  const inputRef = useRef<any>();
  props.focus$.useSubscription(() => {
    inputRef.current.focus();
  });
  return (
    <input ref={inputRef} placeholder="Enter reply" style={{ width: '100%', padding: '4px' }} />
  );
};

const Example = () => {
 const focus$ = useEventEmitter();
  return (
    <>
      <MessageBox focus$={focus$} />
      <InputBox focus$={focus$} />
    </>
  );
};

export default Example;`} />


## API

### Params

```typescript
const result: Result = useEventEmitter<T>();
```

### Result

| Property        | Description                   | Type                                   |
| --------------- | ----------------------------- | -------------------------------------- |
| emit            | Emit a new event.             | `(val: T) => void`                     |
| useSubscription | Subscribe to a event emitter. | `(callback: (val: T) => void) => void` |
