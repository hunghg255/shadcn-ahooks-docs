---
title: useRafTimeout
description: A hook implements with requestAnimationFrame for better performance. The API is consistent with useTimeout. the advantage is that will not trigger function when the page is not rendering, such as page hiding or minimization.
---

## Overview

A hook implements with `requestAnimationFrame` for better performance. The API is consistent with `useTimeout`. the advantage is that will not trigger function when the page is not rendering, such as page hiding or minimization.

[Documentation and Examples](https://ahooks.js.org/hooks/use-raftimeout)

## Installation

<OpenInV0Button url="https://shadcn-ahooks.vercel.app/r/useRafTimeout.json" />

<Tabs items={['pnpm', 'npm', 'yarn', 'bun']}>
  <Tab value="pnpm">
  ```bash
  pnpm dlx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useRafTimeout.json
  ```
  </Tab>
  <Tab value="npm">
  ```bash
  npx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useRafTimeout.json
  ```
  </Tab>
  <Tab value="yarn">
  ```bash
  yarn shadcn@latest add https://shadcn-ahooks.vercel.app/r/useRafTimeout.json
  ```
  </Tab>
  <Tab value="bun">
  ```bash
  bun shadcn@latest add https://shadcn-ahooks.vercel.app/r/useRafTimeout.json
  ```
  </Tab>
</Tabs>

A hook implements with `requestAnimationFrame` for better performance. The API is consistent with `useTimeout`. the advantage is that will not trigger function when the page is not rendering, such as page hiding or minimization.

> `requestAnimationFrame` will automatically downgrade to `setTimeout` in node environment

## Examples

### Default usage

<Preview name="useRafTimeout"
 code={`
import useRafTimeout from '@/src/hooks/ahooks/useRafTimeout';
import React, { useState } from 'react';

const Example = () => {
  const [count, setCount] = useState(0);

  useRafTimeout(() => {
    setCount(count + 1);
  }, 2000);

  return <div>count: {count}</div>;
};

export default Example;`} />

### Advanced usage

<Preview name="useRafTimeout"
 code={`
import useRafTimeout from '@/src/hooks/ahooks/useRafTimeout';
import React, { useState } from 'react';

const Example = () => {
 const [count, setCount] = useState(0);
  const [delay, setDelay] = useState<number | undefined>(1000);

  const clear = useRafTimeout(() => {
    setCount(count + 1);
  }, delay);

  return (
    <div>
      <p> count: {count} </p>
      <p style={{ marginTop: 16 }}> Delay: {delay} </p>
      <button onClick={() => setDelay((t) => (!!t ? t + 1000 : 1000))} style={{ marginRight: 8 }}>
        Delay + 1000
      </button>
      <button
        style={{ marginRight: 8 }}
        onClick={() => {
          setDelay(1000);
        }}
      >
        reset Delay
      </button>
      <button
        onClick={() => {
          clear();
        }}
      >
        clear
      </button>
    </div>
  );
};

export default Example;`} />

## API

```typescript
useRafTimeout(
  fn: () => void,
  delay?: number | undefined,
): fn: () => void;
```

### Params

| Property | Description                                                                                                            | Type                    |
| -------- | ---------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| fn       | The function to be executed after `delay` milliseconds.                                                                | `() => void`            |
| delay    | The number of milliseconds to wait before executing the function. The timer will be cancelled if delay is `undefined`. | `number` \| `undefined` |

### Result

| Property     | Description   | Type         |
| ------------ | ------------- | ------------ |
| clearTimeout | clear timeout | `() => void` |
