---
title: useDrag
description: A pair of hooks to help you manage data transfer between drag and drop
---

## Overview

A pair of hooks to help you manage data transfer between drag and drop

[Documentation and Examples](https://ahooks.js.org/hooks/use-drop)

## Installation

<OpenInV0Button url="https://shadcn-ahooks.vercel.app/r/useDrag.json" />

<Tabs items={['pnpm', 'npm', 'yarn', 'bun']}>
  <Tab value="pnpm">
  ```bash
  pnpm dlx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useDrag.json
  ```
  </Tab>
  <Tab value="npm">
  ```bash
  npx shadcn@latest add https://shadcn-ahooks.vercel.app/r/useDrag.json
  ```
  </Tab>
  <Tab value="yarn">
  ```bash
  yarn shadcn@latest add https://shadcn-ahooks.vercel.app/r/useDrag.json
  ```
  </Tab>
  <Tab value="bun">
  ```bash
  bun shadcn@latest add https://shadcn-ahooks.vercel.app/r/useDrag.json
  ```
  </Tab>
</Tabs>


### Basic Usage

<Preview name="useDrag"
registryDependencies={['useDrop']}
 code={`
import useDrag from '@/src/hooks/ahooks/useDrag';
import useDrop from '@/src/hooks/ahooks/useDrop';
import React, { useRef, useState } from 'react';

const DragItem = ({ data }) => {
  const dragRef = useRef(null);

  const [dragging, setDragging] = useState(false);

  useDrag(data, dragRef, {
    onDragStart: () => {
      setDragging(true);
    },
    onDragEnd: () => {
      setDragging(false);
    },
  });

  return (
    <div
      ref={dragRef}
      style={{
        border: '1px solid #e8e8e8',
        padding: 16,
        width: 80,
        textAlign: 'center',
        marginRight: 16,
      }}
    >
      {dragging ? 'dragging' : \`box-\${data}\`}
    </div>
  );
};

const Example = () => {
   const [isHovering, setIsHovering] = useState(false);

  const dropRef = useRef(null);

  useDrop(dropRef, {
    onText: (text, e) => {
      console.log(e);
      alert(\`'text: \${text}' dropped\`);
    },
    onFiles: (files, e) => {
      console.log(e, files);
      alert(\`\${files.length} file dropped\`);
    },
    onUri: (uri, e) => {
      console.log(e);
      alert(\`uri: \${uri} dropped\`);
    },
    onDom: (content: string, e) => {
      alert(\`custom: \${content} dropped\`);
    },
    onDragEnter: () => setIsHovering(true),
    onDragLeave: () => setIsHovering(false),
  });

  return (
    <div>
      <div ref={dropRef} style={{ border: '1px dashed #e8e8e8', padding: 16, textAlign: 'center' }}>
        {isHovering ? 'release here' : 'drop here'}
      </div>

      <div style={{ display: 'flex', marginTop: 8, overflow: 'auto' }}>
        {['1', '2', '3', '4', '5'].map((e) => (
          <DragItem key={e} data={e} />
        ))}
      </div>
    </div>
  );
};

export default Example;`} />

### Customize Image


<Preview name="useDrag"
registryDependencies={['useDrop']}
 code={`
import useDrag from '@/src/hooks/ahooks/useDrag';
import useDrop from '@/src/hooks/ahooks/useDrop';
import React, { useRef, useState } from 'react';

const COMMON_STYLE: React.CSSProperties = {
  border: '1px solid #e8e8e8',
  height: '50px',
  lineHeight: '50px',
  padding: '16px',
  textAlign: 'center',
  marginRight: '16px',
};

const Example = () => {
   const dragRef = useRef(null);

  useDrag('', dragRef, {
    dragImage: {
      image: 'https://upload.wikimedia.org/wikipedia/commons/8/8e/Nextjs-logo.svg',
    },
  });

  return (
    <div ref={dragRef} style={{ display: 'flex' }}>
      <img style={COMMON_STYLE} src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcR5U16C8yXgBpl7-Bc7Itjx3_LRl425zINA&s" />
      <div style={COMMON_STYLE}>drag me</div>
    </div>
  );
};

export default Example;`} />

## API

### useDrag

```typescript
useDrag<T>(
  data: any,
  target: (() => Element) | Element | MutableRefObject<Element>,
  options?: DragOptions
);
```

#### Params

| Property | Description        | Type                                                        | Default |
| -------- | ------------------ | ----------------------------------------------------------- | ------- |
| data     | Drag data          | `any`                                                       | -       |
| target   | DOM element or ref | `() => Element` \| `Element` \| `MutableRefObject<Element>` | -       |
| options  | More config        | `DragOptions`                                               | -       |

#### DragOptions

| Property    | Description                                                   | Type                           | Default |
| ----------- | ------------------------------------------------------------- | ------------------------------ | ------- |
| onDragStart | On drag start callback                                        | `(e: React.DragEvent) => void` | -       |
| onDragEnd   | On drag end callback                                          | `(e: React.DragEvent) => void` | -       |
| dragImage   | Customize image that follow the mouse pointer during dragging | `DragImageOptions`             | -       |

#### DragImageOptions

| 参数    | 说明                                                                                                                                                                                                                                                                                                          | 类型                | 默认值 |
| ------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------- | ------ |
| image   | An image Element element to use for the drag feedback image. The image will typically be an [`<img>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img) element but it can also be a [`<canvas>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas) or any other visible element | `string \| Element` | -      |
| offsetX | the horizontal offset within the image                                                                                                                                                                                                                                                                        | `number`            | 0      |
| offsetY | the vertical offset within the image                                                                                                                                                                                                                                                                          | `number`            | 0      |
